(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{596:function(n,s,a){"use strict";a.r(s);var e=a(71),t=Object(e.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h2",{attrs:{id:"什么是konva"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是konva"}},[n._v("#")]),n._v(" 什么是Konva？")]),n._v(" "),a("p",[n._v("Konva是一个基于Canvas的JavaScript框架，可实现web应用和移动端应用中的图形交互效果")]),n._v(" "),a("p",[n._v("Konva可以高效的实现动画，过渡，节点嵌套，局部操作，过滤，缓存，事件处理等")]),n._v(" "),a("p",[n._v("可以在stage上绘图，然后对它们进行事件监听，移动或缩放，独立旋转以及高效的动画，即使应用中含有数千个图形也是可以轻松实现")]),n._v(" "),a("h2",{attrs:{id:"安装konva"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装konva"}},[n._v("#")]),n._v(" 安装Konva")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("npm install konva\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<script src="https://unpkg.com/konva@4.0.0/konva.min.js"><\/script>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h2",{attrs:{id:"如何工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何工作"}},[n._v("#")]),n._v(" 如何工作？")]),n._v(" "),a("p",[n._v("所有的图形都始于Konva.Stage，Konva.Stage中又包含多个Konva.Layer")]),n._v(" "),a("p",[n._v("每个layer都有两个canvas渲染器：前台渲染器和后台渲染器。前台渲染器是可以看得见的部分，后台渲染器是一个隐藏的canvas，为了提高效率实现事件监听的工作")]),n._v(" "),a("p",[n._v("每个layer可以包含形状( Shape ), 形状的组( Group )或其他组，stage, layers, groups, 和shapes都是虚拟节点，类似HTML页面中的DOM节点")]),n._v(" "),a("p",[a("img",{attrs:{src:"",alt:"01"}})]),n._v(" "),a("p",[n._v("可以对所有节点进行样式设置和转换，尽管Konva具有可用的预建形状，例如矩形、圆形、图片、子图形(sprites)、文本、线、多边形、正多边形、路径和星星等，但是开发者依旧可以通过实例化Shape类来创建绘制函数来创建自定义图形")]),n._v(" "),a("p",[n._v("只要拥有了Stage，并且上面设置了Layer和Shape，那么就可以为他添加事件监听、变换节点等等")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("import Konva from 'konva'\n\n// 创建stage\nconst stage = new Konva.Stage({\n  container: \"container\",\n  width: window.innerWidth,\n  height: window.innerHeight\n})\n// 创建layer\nconst layer = new Konva.Layer()\n// 创建形状\nconst circle = new Konva.Circle({\n  x: stage.width() / 2,\n  y: stage.height() / 2,\n  radius: 70, // 圆形的半径\n  fill: 'green', // 填充颜色\n  stroke: 'black', // 描边颜色\n  strokeWidth: 3, // 描边宽度 \n})\n// 将形状添加到layer\nlayer.add(circle)\n// 将layer添加到stage\nstage.add(layer)\n\nlayer.draw();\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br")])]),a("p",[a("img",{attrs:{src:"",alt:"02"}})]),n._v(" "),a("h2",{attrs:{id:"基本形状"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本形状"}},[n._v("#")]),n._v(" 基本形状")]),n._v(" "),a("p",[n._v("Konva.js支持以下形状：矩形( Rect ), 圆形( Circle ), 椭圆( Rllipse ), 线段( Line ), 图像( Image ), 文本( Text ), 文本路径( TextPath ), 星星( Start ), 标签( Label ), SVG 路径( SVG Path ), 正多边形( RegularPolygon ). 同时也可以自定义形状.")]),n._v(" "),a("p",[n._v("自定义形状需使用Shape构造函数创建，需提供自定义的绘图方法 sceneFunc")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("import Konva from 'konva'\n\n// 创建stage\nconst stage = new Konva.Stage({\n  container: \"container\",\n  width: window.innerWidth,\n  height: window.innerHeight\n})\n// 创建layer\nconst layer = new Konva.Layer()\n// 创建形状\nconst triangle = new Konva.Shape({\n  sceneFunc: function(ctx){\n    ctx.moveTo(window.innerWidth / 2, window.innerWidth /4)\n    ctx.lineTo(window.innerWidth / 2 - window.innerHeight / (2 * 1.732), window.innerHeight * 3 / 4)\n    ctx.lineTo(window.innerWidth / 2 + window.innerHeight / (2 * 1.732), window.innerHeight * 3 /4)\n    ctx.closePath\n    // Konva的独有方法\n    ctx.fillStrokeShape(this)\n  },\n  fill: 'green',\n  stroke:'black' \n})\n\nlayer.add(triangle)\n\n// 将layer添加到stage\nstage.add(layer)\n\nlayer.draw();\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br")])]),a("p",[a("img",{attrs:{src:"",alt:"03"}})]),n._v(" "),a("h2",{attrs:{id:"样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#样式"}},[n._v("#")]),n._v(" 样式")]),n._v(" "),a("ul",[a("li",[a("p",[n._v("fill：单色、渐变或图像")])]),n._v(" "),a("li",[a("p",[n._v("stroke：(color, width)")])]),n._v(" "),a("li",[a("p",[n._v("shadow：(color,offset,opacity,blur)")])]),n._v(" "),a("li",[a("p",[n._v("opacity")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("const pentagon = new Konva.RegularPolygon({\n    x: stage.width() / 2,\n    y: stage.height() / 2,\n    sides: 5,\n    radius: 70,\n    fill: 'red',\n    stroke: 'black',\n    strokeWidth: 4,\n    shadowOffsetX : 20,\n    shadowOffsetY : 25,\n    shadowBlur : 40,\n    opacity : 0.5\n});\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br")])])])]),n._v(" "),a("p",[a("img",{attrs:{src:"",alt:"04"}})]),n._v(" "),a("h2",{attrs:{id:"事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[n._v("#")]),n._v(" 事件")]),n._v(" "),a("p",[n._v("使用Konva可以轻松实现监听用户添加的事件，例如 click, dblclick, mouseover, tap, dbltap, touchstart 等.")]),n._v(" "),a("p",[n._v("属性值变化事件. 例如 scaleXChange, fillChange 等. 以及拖拽事件. 例如 dragstart, dragmove, dragend.")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("circle.on('mouseout touchend', function() {\n    console.log('user input');\n});\n\ncircle.on('xChange', function() {\n    console.log('position change');\n});\n\ncircle.on('dragend', function() {\n    console.log('drag stopped');\n});\n\n// 创建后设置属性\ncircle.draggable( true );\n// 也可以在创建的时候设置属性\n//draggabled: true\n// 解除绑定事件\n rect.off('click'); \n // 触发事件\n rect.fire('click');\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);